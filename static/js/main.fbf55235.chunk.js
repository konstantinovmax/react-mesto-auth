(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),o=n.n(c),i=n(20),s=n.n(i),r=n(8),l=(n(31),n(25)),u=n(2),d=n(3),j=o.a.createContext(),m=n(21),h=n(22),p=new(function(){function e(t){Object(m.a)(this,e),this._url=t.url,this._headers=t.headers}return Object(h.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"users/me"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430")}))}},{key:"getAllCards",value:function(){return fetch("".concat(this._url,"cards"),{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430")}))}},{key:"patchEditProfile",value:function(e){var t=e.name,n=e.description;return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")}))}},{key:"postCard",value:function(e){var t=e.name,n=e.description;return fetch("".concat(this._url,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438")}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438")}))}},{key:"putLike",value:function(e){return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0430\u0439\u043a")}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u0443\u0431\u0440\u0430\u0442\u044c \u043b\u0430\u0439\u043a")}))}},{key:"changeLikeCardStatus",value:function(e,t){return t?this.putLike(e):this.deleteLike(e)}},{key:"patchChangeAvatar",value:function(e){var t=e.avatarName;return fetch("".concat(this._url,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u0441\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440")}))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-16/",headers:{authorization:"8105b806-1cac-45d8-8567-2a49d509e437","content-type":"application/JSON"}}),_=n.p+"static/media/header-logo.c2821b38.svg";var b=function(e){var t=e.userEmail.email;return Object(a.jsxs)(d.d,{children:[Object(a.jsxs)(d.b,{exact:!0,path:"/",children:[Object(a.jsxs)("div",{className:"header__user-container-mobile ".concat(e.isOpen&&"header__user-container-mobile_is-open"),children:[Object(a.jsx)("p",{className:"header__user-data",children:t}),Object(a.jsx)("button",{className:"header__logout",onClick:e.onSignOut,children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)("img",{className:"header__logo",src:_,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0435\u0440\u0432\u0438\u0441\u0430 Mesto"}),Object(a.jsxs)("div",{className:"header__user-container",children:[Object(a.jsx)("p",{className:"header__user-data",children:t}),Object(a.jsx)("button",{className:"header__logout",onClick:e.onSignOut,children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(a.jsx)("button",{className:"header__menu-burger-container",type:"button",onClick:e.isOpen?e.onClose:e.onOpenMobileMenu,children:Object(a.jsx)("span",{className:"header__menu-burger-button ".concat(e.isOpen&&"header__menu-burger-button_close")})})]})]}),Object(a.jsx)(d.b,{path:"/sign-up",children:Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)("img",{className:"header__logo",src:_,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0435\u0440\u0432\u0438\u0441\u0430 Mesto"}),Object(a.jsx)("div",{className:"header__user-container header__user-container_not-logged-in",children:Object(a.jsx)(r.b,{to:"/sign-in",className:"header__authorization",children:"\u0412\u043e\u0439\u0442\u0438"})})]})}),Object(a.jsx)(d.b,{path:"/sign-in",children:Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)("img",{className:"header__logo",src:_,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0435\u0440\u0432\u0438\u0441\u0430 Mesto"}),Object(a.jsx)("div",{className:"header__user-container header__user-container_not-logged-in",children:Object(a.jsx)(r.b,{to:"/sign-up",className:"header__authorization",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})})]})};var O=function(e){var t=o.a.useContext(j),n=e.card.likes.some((function(e){return e._id===t._id})),c="element__like-button ".concat(n?"element__like-button_active":"element__like-button"),i=e.card.owner._id===t._id,s="element__delete ".concat(i?"element__delete_active":"element__delete");return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("figure",{className:"element",children:[Object(a.jsx)("button",{type:"button",className:s,onClick:function(){e.onCardDelete(e.card)}}),Object(a.jsx)("img",{className:"element__image",src:e.card.link,alt:e.card.name,onClick:function(){e.onCardClick(e.card)}}),Object(a.jsxs)("div",{className:"element__caption-container",children:[Object(a.jsx)("h2",{className:"element__caption",children:e.card.name}),Object(a.jsxs)("div",{className:"element__like-area",children:[Object(a.jsx)("button",{type:"button",className:c,onClick:function(){e.onCardLike(e.card)}}),Object(a.jsx)("output",{className:"element__like-numbers",children:e.card.likes.length})]})]})]})})};var f=function(e){var t=o.a.useContext(j);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsx)("div",{className:"profile__avatar-container",children:Object(a.jsx)("img",{className:"profile__avatar",src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onClick:e.onEditAvatar})}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__name-edit",children:[Object(a.jsx)("h1",{className:"profile__name",children:t.name}),Object(a.jsx)("button",{type:"button",className:"profile__edit-button",onClick:e.onEditProfile})]}),Object(a.jsx)("p",{className:"profile__description",children:t.about})]}),Object(a.jsx)("button",{type:"button",className:"profile__add-button",onClick:e.onAddPlace})]}),Object(a.jsx)("section",{className:"elements",children:e.cards.map((function(t){return Object(a.jsx)(O,{card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})]})};var x=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Mesto Russia"})})};var g=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"modal modal_type_picture ".concat(e.card.link&&"modal_is-open"),children:Object(a.jsxs)("div",{className:"modal__container_type-picture",children:[Object(a.jsx)("button",{type:"reset",className:"modal__close-button modal__close-button_type-picture",onClick:e.onClose}),Object(a.jsxs)("figure",{children:[Object(a.jsx)("img",{className:"modal__image",src:e.card.link,alt:e.card.name}),Object(a.jsx)("figcaption",{className:"modal__caption",children:e.card.name})]})]})})})};var v=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"modal modal_type_".concat(e.name," ").concat(e.isOpen&&"modal_is-open"),children:Object(a.jsxs)("form",{name:"",action:"#",className:"modal__container modal__container_type_".concat(e.name),onSubmit:e.onSubmit,noValidate:!0,children:[Object(a.jsx)("h2",{className:"modal__title",children:e.title}),e.children,Object(a.jsx)("button",{type:"submit",className:"modal__save-button",children:e.buttonText||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(a.jsx)("button",{type:"reset",className:"modal__close-button",onClick:e.onClose})]})})})};var N=function(e){var t=o.a.useState(""),n=Object(u.a)(t,2),c=n[0],i=n[1],s=o.a.useState(""),r=Object(u.a)(s,2),l=r[0],d=r[1],m=o.a.useContext(j);return o.a.useEffect((function(){i(m.name),d(m.about)}),[m]),Object(a.jsxs)(v,{isOpen:e.isOpen,name:"edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:c,description:l})},children:[Object(a.jsx)("input",{id:"editprofile-name-input",name:"name",type:"text",className:"modal__input modal__input_type_name",value:c||"",onChange:function(e){i(e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",minLength:"2",maxLength:"40",required:!0}),Object(a.jsx)("span",{id:"name-input-error",className:"modal__input-error"}),Object(a.jsx)("input",{id:"editprofile-description-input",name:"description",type:"text",className:"modal__input modal__input_type_description",value:l||"",onChange:function(e){d(e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"200",required:!0}),Object(a.jsx)("span",{id:"description-input-error",className:"modal__input-error"})]})};var C=function(e){var t=o.a.useRef();return Object(a.jsxs)(v,{isOpen:e.isOpen,name:"add-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatarName:t.current.value})},children:[Object(a.jsx)("input",{ref:t,id:"editavatar-input",name:"avatarName",type:"url",className:"modal__input modal__input_type_url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(a.jsx)("span",{id:"avatar-input-error",className:"modal__input-error"})]})};var k=function(e){var t=o.a.useState(""),n=Object(u.a)(t,2),c=n[0],i=n[1],s=o.a.useState(""),r=Object(u.a)(s,2),l=r[0],d=r[1];return Object(a.jsxs)(v,{isOpen:e.isOpen,name:"add-element",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:c,description:l}),i(""),d("")},children:[Object(a.jsx)("input",{id:"addplace-name-input",name:"name",type:"text",className:"modal__input modal__input_type_place",value:c,onChange:function(e){i(e.target.value)},placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"1",maxLength:"30",required:!0}),Object(a.jsx)("span",{id:"name-input-error",className:"modal__input-error"}),Object(a.jsx)("input",{id:"addplace-description-input",name:"description",type:"url",className:"modal__input modal__input_type_url",value:l,onChange:function(e){d(e.target.value)},placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(a.jsx)("span",{id:"description-input-error",className:"modal__input-error"})]})},y=n.p+"static/media/done.1b6082f8.svg",S=n.p+"static/media/denied.df8eddf6.svg";var P=function(e){var t="\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!",n="\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.",c="\u0423\u0441\u043f\u0435\u0448\u043d\u043e",o="\u041e\u0448\u0438\u0431\u043a\u0430";return Object(a.jsx)("div",{className:"modal modal_type_signup-info ".concat(e.isOpen&&"modal_is-open"),children:Object(a.jsxs)("div",{className:"modal__container modal__container_type_signup-info",children:[Object(a.jsx)("button",{type:"reset",className:"modal__close-button modal__close-button_type-signup-info",onClick:e.onClose}),Object(a.jsx)("img",{className:"modal__access-status",src:e.accessNotice?y:S,alt:e.accessNotice?c:o}),Object(a.jsx)("h2",{className:"modal__title",children:e.accessNotice?t:n})]})})},L=n(11),E=n(10);var w=Object(d.h)((function(e){var t=o.a.useState({email:"",password:""}),n=Object(u.a)(t,2),c=n[0],i=n[1];function s(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(E.a)(Object(E.a)({},e),{},Object(L.a)({},n,a))}))}return Object(a.jsx)("section",{className:"authorization",children:Object(a.jsxs)("form",{className:"authorization__form",onSubmit:function(t){t.preventDefault();var n=c.email,a=c.password;e.onRegister(n,a)},children:[Object(a.jsx)("h2",{className:"authorization__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(a.jsx)("input",{id:"email",name:"email",className:"authorization__input",type:"email",value:c.email,onChange:s,placeholder:"Email",autoComplete:"off",required:!0}),Object(a.jsx)("input",{id:"password",name:"password",className:"authorization__input",type:"password",value:c.password,onChange:s,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0}),Object(a.jsx)("button",{className:"authorization__submit-button",type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(a.jsxs)("div",{className:"authorization__question-container",children:[Object(a.jsx)("p",{className:"authorization__question-text",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(a.jsx)(r.b,{to:"/sign-in",className:"authorization__link-to-signin",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})}));var z=Object(d.h)((function(e){var t=o.a.useState({email:"",password:""}),n=Object(u.a)(t,2),c=n[0],i=n[1];function s(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(E.a)(Object(E.a)({},e),{},Object(L.a)({},n,a))}))}return Object(a.jsx)("section",{className:"authorization",children:Object(a.jsxs)("form",{className:"authorization__form",onSubmit:function(t){t.preventDefault();var n=c.email,a=c.password;e.onLogin(n,a)},children:[Object(a.jsx)("h2",{className:"authorization__title",children:"\u0412\u0445\u043e\u0434"}),Object(a.jsx)("input",{id:"input-user-email",name:"email",className:"authorization__input",type:"email",value:c.email,onChange:s,placeholder:"Email",autoComplete:"off",required:!0}),Object(a.jsx)("input",{id:"input-user-password",name:"password",className:"authorization__input",type:"password",value:c.password,onChange:s,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",minLength:"8",maxLength:"16",required:!0}),Object(a.jsx)("button",{className:"authorization__submit-button",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})})})),A=n(24),T=function(e){var t=e.component,n=Object(A.a)(e,["component"]);return Object(a.jsx)(d.b,{children:function(){return n.loggedIn?Object(a.jsx)(t,Object(E.a)({},n)):Object(a.jsx)(d.a,{to:"./sign-in"})}})},D="https://auth.nomoreparties.co";var q=function(){var e=o.a.useState([]),t=Object(u.a)(e,2),n=t[0],c=t[1],i=o.a.useState({}),s=Object(u.a)(i,2),r=s[0],m=s[1],h=o.a.useState(!1),_=Object(u.a)(h,2),O=_[0],v=_[1],y=o.a.useState(!1),S=Object(u.a)(y,2),L=S[0],E=S[1],A=o.a.useState(!1),q=Object(u.a)(A,2),I=q[0],M=q[1],U=o.a.useState(!1),F=Object(u.a)(U,2),J=F[0],R=F[1],B=o.a.useState(!1),G=Object(u.a)(B,2),H=G[0],V=G[1],K=o.a.useState(!1),Q=Object(u.a)(K,2),W=Q[0],X=Q[1],Y=o.a.useState(!1),Z=Object(u.a)(Y,2),$=Z[0],ee=Z[1],te=o.a.useState({}),ne=Object(u.a)(te,2),ae=ne[0],ce=ne[1],oe=o.a.useState(""),ie=Object(u.a)(oe,2),se=ie[0],re=ie[1],le=Object(d.g)();function ue(){R(!0)}function de(){v(!1),E(!1),M(!1),R(!1),V(!1),m({})}function je(){var e,t=localStorage.getItem("jwt");t&&(e=t,fetch("".concat(D,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){if(e){var t={email:e.data.email};re(t),X(!0),le.push("/")}})).catch((function(e){console.log(e)}))}return o.a.useEffect((function(){je()}),[]),o.a.useEffect((function(){Promise.all([p.getUserInfo(),p.getAllCards()]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];ce(n),c(a)})).catch((function(e){console.log(e)}))}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"root",children:Object(a.jsx)(j.Provider,{value:ae,children:Object(a.jsxs)("div",{className:"root__content",children:[Object(a.jsx)(b,{userEmail:se,onSignOut:function(){localStorage.removeItem("jwt"),X(!1),le.push("/sign-in")},onOpenMobileMenu:function(){V(!0)},isOpen:H,onClose:de}),Object(a.jsxs)(d.d,{children:[Object(a.jsx)(T,{exact:!0,path:"/",loggedIn:W,component:f,onEditAvatar:function(){v(!0)},onEditProfile:function(){E(!0)},onAddPlace:function(){M(!0)},onCardClick:function(e){m(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===ae._id}));p.changeLikeCardStatus(e._id,!t).then((function(t){var a=n.map((function(n){return n._id===e._id?t:n}));c(a)})).catch((function(e){console.log(e)}))},onCardDelete:function(e){var t=e.owner._id===ae._id;p.deleteCard(e._id,t).then((function(){var t=n.filter((function(t){return e._id!==t._id}));c(t)})).catch((function(e){console.log(e)}))},cards:n}),Object(a.jsx)(d.b,{path:"/sign-up",children:Object(a.jsx)(w,{onRegister:function(e,t){(function(e,t){return fetch("".concat(D,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.data?(ee(!0),ue(),le.push("./sign-in")):(ee(!1),ue())})).catch((function(e){console.log(e)}))}})}),Object(a.jsx)(d.b,{path:"/sign-in",children:Object(a.jsx)(z,{onLogin:function(e,t){(function(e,t){return fetch("".concat(D,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.token?(localStorage.setItem("jwt",e.token),re(se),X(!0),le.push("/")):(ee(!1),ue())})).catch((function(e){console.log(e)}))}})}),Object(a.jsx)(d.b,{path:"*",children:W?Object(a.jsx)(d.a,{to:"/"}):Object(a.jsx)(d.a,{to:"/sign-in"})})]}),Object(a.jsx)(x,{}),Object(a.jsx)(C,{isOpen:O,onClose:de,onUpdateAvatar:function(e){p.patchChangeAvatar(e).then((function(e){ce(e),de()})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(N,{isOpen:L,onClose:de,onUpdateUser:function(e){p.patchEditProfile(e).then((function(e){ce(e),de()})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(k,{isOpen:I,onClose:de,onAddPlace:function(e){p.postCard(e).then((function(e){c([e].concat(Object(l.a)(n))),de()})).catch((function(e){console.log(e)}))}}),Object(a.jsx)(g,{card:r,onClose:de}),Object(a.jsx)(P,{isOpen:J,onClose:de,accessNotice:$})]})})})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(r.a,{children:Object(a.jsx)(q,{})})}),document.getElementById("root")),I()}},[[37,1,2]]]);
//# sourceMappingURL=main.fbf55235.chunk.js.map